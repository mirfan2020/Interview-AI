{% load static %}

<!doctype html>
<html>

<head>
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title id="page_title" value="recorder">Interview-AI</title>

	<link rel="stylesheet" type="text/css" href="{% static "Interviewer/style/css/bootstrap.css" %}">
	<script type="text/javascript" src="{% static "Interviewer/style/js/jquery.min.js" %}"></script>
	<script type="text/javascript" src="{% static "Interviewer/style/js/bootstrap.min.js" %}"></script>
	<script type="text/javascript" src="{% static "Interviewer/style/js/recorderScript.js" %}"></script>
	<link rel="stylesheet" type="text/css" href="{% static "Interviewer/style/css/styleRecorder.css" %}">
	<script src="webcamWorker.js"></script>

</head>

<body>
	<img src = '/static/Interviewer/userMedia/index.jpeg' style="position: absolute;left: 0px;top: 0px;z-index: 2;">

	<div class="transBg">
		<div class="outer">
			<div class="middle">
				<div class="inner">

					<div class="well well-lg">
						<div id="question"></div>
					</div>


	
					
					
					<!-- First, include the Webcam.js JavaScript Library -->
					<script  src="../webcam.min.js"></script>
					
					<!-- Configure a few settings and attach camera -->
					
					
					<!-- A button for taking snaps -->
					
					<!-- Code to handle taking the snapshot and displaying it locally -->
					<div id="my_camera"></div>
				
				

					
					<form id ="form" action="/analyzeSpeech" enctype="multipart/form-data" method="post">
						{% csrf_token %}
						<input type="hidden" id="user_speech_b64code" name="user_speech_b64code" value="#" width="50">
						<input type="text" id="results" name="user_photo_url" value="#" width="50" hidden>

						<span><button type="button" id="btnRecord" class="btn btn-default btn-lg" onclick="toggleRecording(this);take_snapshot()"><span id="recText">Record</span></button></span>
						<span><input type="submit" class="btn btn-default btn-lg disabled" id="button_analyze_speech" value="Submit"></span>

						<!--  webcam snap  -->
						<canvas id="canvas" hidden></canvas>
					</form>
					<script >
						Webcam.set({
							width: 320,
							height: 240,
							image_format: 'png'
						});
						Webcam.attach( '#my_camera' );
						console.log(document.getElementById('my_camera'))
					</script>
					<script >
						function take_snapshot() {
							// take snapshot and get image data
							Webcam.snap( function(data_uri) {
								// display results in page
								document.getElementById('results').value = 
									data_uri;
							} );
						}
					</script>


					<!--<button id="capture_baseline" hidden></button>-->

					<div id="viz" hidden="hidden">
						<canvas id="wavedisplay" width="1024" height="150" style="display: none;" ></canvas>
					</div>

				</div>
			</div>
		</div>
	</div>

	<script src="{% static "Interviewer/javascript/audiodisplay.js" %}"></script>
	<script src="{% static "Interviewer/javascript/recorder.js" %}"></script>
	<script src="{% static "Interviewer/javascript/main.js" %}"></script>

</body>
</html>
